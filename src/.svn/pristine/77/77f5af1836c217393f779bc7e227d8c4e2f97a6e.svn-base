package Server;

import java.net.Socket;
import java.util.ArrayList;
import java.util.List;

public class GameLobby implements Runnable {

    private String password;
    private String lobbyName;
    private int id;
    private int totalScore;
    private GameOwner owner;
    private List<Player> players;
    private List<Socket> connections;
    private List<Minigame> games;

    public GameLobby(String lobbyName, String password, GameOwner owner) {
        this.password = password;
        this.id = System.identityHashCode(this);
        this.owner = owner;
        totalScore = 0;
        players = new ArrayList<>();
        players.add(owner);
        connections = new ArrayList<>();
        connections.add(owner.getClient().getConnection());
        games = new ArrayList<>();
    }

    public String getLobbyName() {
        return lobbyName;
    }

    public String getPassword() {
        return password;
    }

    public void addPlayer(Player playerToAdd) {
        players.add(playerToAdd);
        connections.add(playerToAdd.getClient().getConnection());
    }

    @Override
    public void run() {

    }

    public List<Player> getWinningPlayers() {
        List<Player> winningPlayers = new ArrayList<>();
        int maxScore = 0;
        for (Player player : players) {
            if (player.getScore() > maxScore) {
                maxScore = player.getScore();
            }
        }
        for (Player player : players) {
            if (player.getScore() == maxScore) {
                winningPlayers.add(player);
            }
        }
        return winningPlayers;
    }
}
